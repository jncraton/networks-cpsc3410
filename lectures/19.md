Fragmentation and Reassembly
============================

Fragmentation
-------------

- IP packets may be 65,535 bytes
- Underlying networks may have smaller limits
- Packets may need to be broken (fragmented) in order to be delivered

---

![IP fragmentation over networks](https://book.systemsapproach.org/_images/f03-17-9780123850591.png)

Fragments
---------

- Valid IP packets themselves
- Contain information needed for reassembly

Reassembly
----------

- Hosts gather fragments and reassemble
- This is a relative expensive process we'd prefer to avoid

Maximum transmission unit (MTU)
-------------------------------

- Determines that maximum IP packet that can be carried in a single frame
- It is reasonable to not send IP packets larger than the MTU to avoid fragmentation

Path MTU Discovery
------------------

- Used to determine max MTU for path to avoid fragmentations
- Senders sends an IP packet with a Don't Fragment (DF) bit set
- Any node that would need to break up the packet instead sends a ICMP Fragmentation Needed message back to the sender
- The sender repeats the process to find a reasonable MTU
