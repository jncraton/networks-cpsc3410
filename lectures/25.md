- Career Fair Wednesday
    - Most SoSE classes are cancelled
    - Go to the fair!
- Presentation Adjustments

4.3 Multicast
=============

Multicast
---------

- There are applications, such as live broadcasts, that can benefit from sending traffic to multiple hosts
- Sending a packet to multiple hosts is known as multicasting

Multicast Addresses
-------------------

- There are special address ranges in IPv4 and IPv6 reserved for multicasting
- Hosts can configure there NICs to listen to multicast addresses of interest

Multicast Uses
--------------

- Typically limited to niche applications
- LAN IP TV broadcasts
- Internal communication on multimedia CDNs

Multicast on the Internet
-------------------------

- Requires more complex routing
- Creates new attack surface for denial-of-service
- Rarely used in practice

Multicast Routing
-----------------

Not covered in this class.

4.4 Multiprotocol Label Switching
=================================

4.5 Routing Among Mobile Devices
================================

Mobile Challenges
-----------------

- The Internet was designed for stationary devices
- Addresses are based on location and network
- Moving around will necessarily change your address and break existing connections

---

![Forwarding packets from a correspondent node to a mobile node](https://book.systemsapproach.org/_images/f04-26-22092018.png)

Security
--------

- We can simply send a message to the correspondent node updating our address
- How would they be able to trust that it is really us?
- This mechanism could be used for MitM attacks

Two Functions of Addressing
---------------------------

- Identification - Who are we talking to?
- Location - How do we route packets to them?

TCP
---

- Connections assuming IP addresses do not change
- TCP is difficult to replace or change

Connection Handling
-------------------

- Application can check the state of connections and recreate them as needed
- This is the approach used by HTTP 

Mobility and Wireless
---------------------

- Wireless devices don't necessarily exhibit mobility as described here
- A device moving around campus connecting to different APs is physically mobile, but it is not changing networks or IP addresses
- *Mobility* would take place if the device transitioned from campus Wifi to a cell tower

Mobility Agents
---------------

- In order to facilitate consistent connections, we can build a system of agents on top of our existing networks

---

![Mobility host and agent](https://book.systemsapproach.org/_images/f04-27-9780123850591.png)

Challenges
----------

1. How does the home agent intercept a packet that is destined for the mobile node?
2. How does the home agent then deliver the packet to the foreign agent?
3. How does the foreign agent deliver the packet to the mobile node?

Solutions
---------

- Proxy ARP
- Tunneling

Weaknesses
----------

- Can be slow
- Can use very poor routes

5.1 Simple Demultiplexor (UDP)
==============================

---

IP Addressing
-------------

- The IP layer provides a way to address packets to a given host
- We need a way to route data to the appropriate process on a given host

Ports
-----

- Used by UDP and TCP to identify processes

---

![UDP Header](https://book.systemsapproach.org/_images/f05-01-9780123850591.png)

Learning Ports
--------------

- Messages will include a `srcport` that can be used in replies
- IANA registers and publishes ports for common services (located in /etc/services on Unix-like systems)

---

![UDP Message Queue](https://book.systemsapproach.org/_images/f05-02-9780123850591.png){height=540px}

Sockets
=======

---

Sockets provide a standard interface from the network to our applications

Socket types
------------

- Stream - provides a virtual circuit
- Datagram - delivers individual packets

Socket Implementation
---------------------

- Independent of network type
- Most typically used with TCP/IP and UDP/IP

---

![Socket States](media/socket-states.png)

UDP Sockets in Python
---------------------

Create a socket
---------------

```python
sock = socket.socket(family=AF_INET, type=SOCK_DGRAM)
```

Send Data
---------

- Send raw bytes to a port on a particular IP

```python
sock.sendto(b"Hello!", ("127.0.0.1", 2001))
```

Get Data
--------

- Returns bytes from socket when available

```python
data, address = sock.recvfrom(bufsize=1024)
```

---

Close a socket

```python
sock.close()
```

Bind
----

- Used when implementing a server
- Tells the OS to direct incoming UDP packets to your process

```python
sock.bind(("127.0.0.1", 2001))
```

Math Server Example
-------------------

Exercise
---------

Create a Python client that performs operations on the server at 69.164.205.80:9999.
