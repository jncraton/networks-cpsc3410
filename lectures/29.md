
5.4 Transport for Real-Time
===========================

Real-time
---------

- Traditional uses of network (email, file transfers, etc) don't have real-time requirements
- Some more modern uses (VoIP, videoconferencing, etc) do have these requirements

Application Types
-----------------

- Interactive - two or more people communicating directly (Google Meet)
- Streaming - data is being delivered and viewed immediately (Netflix)

UDP
---

- Adds no additional latency
- Does not provide reliability
- Does not handle reordering

TCP
---

- Reliable
- Handles reordering
- Adds latency in case of errors or reordering

RTP
---

- Real-time protocol
- Designed to handle communication between a variety of interactive applications

---

![Common RTP Stack](https://book.systemsapproach.org/_images/f05-22-9780123850591.png)

Requirements
------------

- Coding scheme advertisement and selection
- Timestamping for continuous playback from buffer
- Stream sync
- Packet loss indication
- Usernames
- Limited overhead

Ports
-----

- Data is sent over an even-numbered UDP port
- Control information is sent over a port one higher

Handshaking
-----------

- Video protocol
- Voice protocol

---

![RTP Header](https://book.systemsapproach.org/_images/f05-23-9780123850591.png)

Header Fields
-------------

- V - version
- P - padding
- x - counts contributing sources
- m - marker bit (application specific use)
- pt - payload type to demultiplex streams

Timestamps
----------

- Indicate start time of first sample in packet
- Does not represent actual time, only relative time
- Time unit is left up to application

Synchronization Source
----------------------

- SSRC
- 32-bit self-assigned address
- Creates separation from IP protocol
- Allows multiple streams (e.g. cameras) from 1 IP address

Contributing Sources
--------------------

- A mixer may combine multiple streams into a single stream
- The SSRC values for the contributing sources will be listed by a mixer in the CSRC fields

Congestion Control
------------------

- TCP is used for latency reasons
- We can't send data slower
- We can change parameters to send less data

Security
--------

- Unencrypted by default
- DTLS and SRTP can provide encryption

Control Protocol
----------------

- Feedback on the performance of the application and the network
- A way to correlate and synchronize different media streams that have come from the same sender
- A way to convey the identity of a sender for display on a user interface


Time Synchronization
-------------------

- RTCP packets include a mechanism to relate stream-specific timing information to clock time

6.1 Issues in Resource Allocation
=================================

Resource Allocation
-------------------

- Process by which network elements try to meet the competing demands that applications have for network resources
    - Link bandwidth
    - Router/switch buffer space

Congestion Control
------------------

- Efforts made by network nodes to prevent or respond to overload conditions
- Congestion is bad for everyone
- The goal should be to eliminate or even prevent it

Flow Control
------------

- Congestion control deals with the network as a whole
- Flow control deals with a pair of hosts not overwhelming one another

Packet-Switched Network
-----------------------

- Multiple links connected to deliver packets
- Hosts and routers do not have complete information about available bandwidth of the network

---

![Possible bottleneck](https://book.systemsapproach.org/_images/f06-01-9780123850591.png)

Connectionless Flows
--------------------

- IP packets are routed independently
- It is useful to consider packets between a pair of hosts following a similar route as a single *flow*

---

![Flows](https://book.systemsapproach.org/_images/f06-02-9780123850591.png)

Soft State
----------

- State that does not need to be explicitly created and destroyed via signaling
- Most routers maintain soft state about flows to aid in resource allocation

Characteristics
---------------

- Router-Centric versus Host-Centric
- Reservation-Based versus Feedback-Based
- Window Based versus Rate Based

Evaluation
----------

- Throughput should be maximized
- Delay should be minimized

Power
-----

- Throughput / Delay
- Ratio is a function of load placed on network by allocation mechanism
- Ratio should be maximized

---

![Ratio of throughput to delay as a function of load](https://book.systemsapproach.org/_images/f06-03-9780123850591.png)

