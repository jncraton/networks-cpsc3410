2.5 Reliable Transmission
=========================

Errors
------

- Bitstreams may have errors
- Errors can be detected using CRCs or other mechanisms
- Errors are relatively expensive to repair

Layer
-----

- Reliable transmission may be provided by the link layer
- It may also be provided by higher layers
- The basic techniques are the same

Automatic Repeat Request (ARQ)
------------------------------

- Receiver - Acknowledge when data arrives
- Sender - Timeout if no acknowledgement
- Retransmission can be used to provide correct data

Stop and wait
=============

---

- After sending a frame, we wait for acknowledgement before sending another
- Retry sending after a timeout and no acknowedgement

---

This seems simple. What can go wrong?

---

![Stop and wait errors](https://book.systemsapproach.org/_images/f02-17-9780123850591.png){height=540px}


Duplicate frames
----------------

- If we acknowledge a frame, but the ack doesn't arrive in time, the frame will be retransmitted
- This will appear to be a *new* frame, causing data duplication
- We can solve this using 1-bit sequence number

---

![Stop and wait with 1-bit sequence number](https://book.systemsapproach.org/_images/f02-18-9780123850591.png){height=540px}

Stop and wait limitation
------------------------

Our max data rate will be capped by our frame size and RTT

Key idea
--------

Our delay bandwidth product represents the amount of data we need to be able to send without acknowledgement to optimize throughput

