Elementary Data Link Protocols
==============================

Ideal channel
-------------

- No errors
- No processing limitations
- Channel always open

Handling limited processing
---------------------------

Stop-and-wait waits for a frame to be acknowledged before sending another.

Handling Loss
-------------

- Automatic Repeat reQuest (ARQ)
- AKA Positive Acknowledgement with Retransmission (PAR)
- Requires adding sequence numbers to header in case ACK is lost

Timer
-----

Required to handle retransmission in case of missing ACK

Piggybacking
------------

Temporarily delay acks until we have a packet to send

Sliding Window Protocols
========================

One-bit Sliding Window
----------------------

Same as stop and wait

---

![Sliding Window Example](https://upload.wikimedia.org/wikipedia/commons/thumb/3/32/Sliding_Window.svg/1024px-Sliding_Window.svg.png)

---

One bit sliding window is bottlenecked by latency

Bandwidth delay product
-----------------------

Bandwidth in bits/s multiplied by one way transit time

Appropriate window size
-----------------------

- 2BD + 1
- Where BD is the bandwidth delay product in frames
- The 2 is due to round trip delay
- The 1 is because we send an ack frame in addition to our data

Optimal Link Utilization
------------------------

$\textrm{link utilization} \leq {w \over 1 + 2BD}$

Pipelining
----------

Multiple frames are kept in flight

---

![CPU Pipelining](https://upload.wikimedia.org/wikipedia/commons/2/21/Fivestagespipeline.png)

Handling Errors
---------------

![Go-back-n](figures/3-18a.png)

---

![Selective repeat](figures/3-18a.png)

---

Tradeoffs
---------

- Selective repeat saves bandwidth
- Go-back-n allows size 1 sliding window and simpler hardware

Cumulative Acknowledgement
--------------------------

An ACK implies ACKs for all previous data

Example Protocols
=================

PPP
---

Point-to-point Protocol

Features
--------

- Framing method delineating start and end with error detection
- Link Control Protocol (LCP) to handle bringing up links and managing parameters
- Network-layer option negotiation via NCP

Overview
--------

- Byte oriented protocol
- Byte stuffing and flag bytes used for frame detection
- Sliding window, acknowledgements, and timeouts for flow control

---
 
![PPP Frame](figures/ppp-frame.png)

---

![PPP Link State Diagram](figures/3-25.png)
